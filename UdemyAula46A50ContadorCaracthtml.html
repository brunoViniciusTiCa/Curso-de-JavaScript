<!doctype html>
<html>
    <head>
        <title>Curso Javascript Completo 2018</title>
        <meta charset="utf-8">
        
        <link href="css/bootstrap.css" rel="stylesheet">
        <link href="css/bootstrap-theme.css" rel="stylesheet">
        
        <script src="beluga.js"></script>

    </head>
    <body>
        <div class="container">
            <h1>Curso Javascript Completo 2018</h1>

            <textarea id="msg" cols="50" rows="10" maxlength="150"></textarea>
            <div id="restaContainer" style="display: none;">
            Restam <span id='resta'></span> Caracteres.
            </div>
        </div>
        <script>
                'use strict'
                
                var $txtMsg = document.getElementById("msg");
                var $restaContainer = document.getElementById("restaContainer");
                var $resta   = document.getElementById('resta');
                var maxima  = $txtMsg.maxLength;
                
                function mostrarContainerResta(){
                    $restaContainer.style.display = 'block';
                }
                
                mostrarContainerResta();
                mostrarCaracteresRestantes(maxima);
                
                $txtMsg.addEventListener('input', checkLength);  
            
            function checkLength(e){
                
                var numeroLetrasDigitadas = this.value.length;
                var carateresRestantes = parseInt(maxima - numeroLetrasDigitadas);
                mostrarCaracteresRestantes(carateresRestantes);
                
                if(parseInt(resta.textContent) === 10){
                   alert("Restam apenas 10 caracteres!");
                }
               
                function mostrarCaracteresRestantes(n){
                    $resta.textContent = n;
                }
            }
        </script>
        
    </body>
</html>